
# 基本特征
- **并发**
	在一段时间内能同时运行多个程序，而**并行**则指同一时刻能运行多个指令。
	**并行**需要多个“执行器”，如多核处理器或者分布式计算系统。
	操作系统通过引入“虚拟”，使得程序能够**并发**运行。
- **异步**
	并发程序之间的执行没有先后顺序，且各个程序不知道其他程序执行到哪了。
- **共享**
	共享是指系统中的资源可以被多个并发进程共同使用。
	有两种共享方式：互斥共享和同时共享。
	互斥共享在同一时间只允许一个进程访问*(如打印机)*，需要用同步机制来实现。
- **虚拟**
	虚拟技术把一个物理实体转换为多个逻辑实体。
	主要有两种虚拟技术：时分复用和空分复用。
	并发执行使用了时分复用技术，各个进程每次计算占用处理器很少的时间*(虽然没计算完，但是还是让给另一个进程使用CPU)*。
	虚拟内存*(参考内存管理的虚拟内存部分)*使用了空分复用技术，把原来的一个物理地址空间分成多个进程私有的地址空间。

`参考`

- “地址空间”?  
如果共用一个地址空间；假设a进程使用地址100，b进程也使用地址100，那么a，b操作的是同一个数据。


# 基本功能

- **设备管理**
	完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率。
	主要包括缓冲管理、设备分配、设备处理、虛拟设备等。
- **文件管理**
	文件存储空间的管理、目录管理、文件读写管理和保护等。
- **内存管理**
	内存分配、地址映射、内存保护与共享、虚拟内存等。
- **进程管理**
	进程控制、进程同步、进程通信、死锁处理、处理机调度等。

# 系统调用

操作系统面向开发人员的核心接口。

当代码执行到系统调用会“陷入”内核*(开始执行操作系统的代码，“陷入”表示**执行的状态**发生了变化)*。

<div align="center"> <img src="pics/tGPV0.png" width="600"/> </div><br>

Linux 的系统调用主要有以下这些：

| Task | Functions |
| :---: | --- |
| 进程控制 | fork(); exit(); wait(); |
| 进程通信 | pipe(); shmget(); mmap(); |
| 文件操作 | open(); read(); write(); |
| 设备操作 | ioctl(); read(); write(); |
| 信息维护 | getpid(); alarm(); sleep(); |
| 安全 | chmod(); umask(); chown(); |


# 大内核和微内核

## 大内核

大内核是将操作系统各个功能*(模块)*整合到一起。

各模块相互调用不需要借助“中间人”，且不需要“转换状态”，因此有很高的性能。

## 微内核

由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。

在微内核结构下，操作系统被划分成小的、定义良好的模块。只有微内核这一个模块运行在内核态，其余模块运行在用户态。

因为需要频繁地在用户态和内核态之间进行切换，所以会有一定的性能损失。

<div align="center"> <img src="pics/2_14_microkernelArchitecture.jpg"/> </div><br>

`参考`

- 为什么要划分用户态和内核态?和系统调用中“执行状态的变化”以及“转换状态”有什么关系?  

# 中断分类

CPU不断的执行指令，但是执行指令过程中很可能会遇到**紧急情况**，那么就需要中断当前执行的指令，然后去处理意外。这些紧急情况有：

## 外中断

由 CPU 执行指令以外的事件引起，如 I/O 完成中断*(表示设备输入/输出处理已经完成，处理器能够发送下一个输入/输出请求)*、时钟中断*(设置的定时到了)*、控制台中断*(ssh连接断开了)*等。

## 异常

由 CPU 执行**异常**指令引起，如非法操作码、地址越界、算术溢出等。

## 陷入

在用户程序中使用系统调用。

