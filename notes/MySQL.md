# 数据类型

## 整型

TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT 分别使用 8, 16, 24, 32, 64 位存储空间

INT(11) 显示字符的个数。

## 浮点数

DECIMAL 高精度小数、CPU 不原生支持。

设置 float(2,2)，那么写入12.3这个数字时，实际插入的是0.99。

## 字符串

数字是字符长度

**VARCHAR** 

变长、保留空格

## 时间和日期

### DATETIME

8 字节、1001-9999，秒、时区无关。

例如“2008-01-16 22:37:08”

### TIMESTAMP

4 字节、到格林威治午夜秒数、2038 年

# B+ Tree

多叉平衡（Balance）查找树。

- 节点多键，非递减（递增/等），指向皆小
- 叶同层，所有键、数据，
- 叶相连


<div align="center"> <img src="pics/10a6d3ee-04b2-46b4-b171-d596e5ab0f84.jpg"/> </div><br>
## 红黑树

磁盘 IO 更少，IO 速度更快

`参考`

- 聚簇索引和辅助索引？
- 哈希索引
- 全文索引

# 优化

- SQL 语句优化：查少量数据、尽量使索引生效，尽量使用索引的数据

  - 尽量使索引生效：建立索引（前缀，选择性）、使用上索引

- 缓存；读缓存，写缓存。

- 读写分离

  原因：增加服务器优化、读优化、锁争用

  复制原理：binlog 线程、io 线程、sql 线程、日志恢复

- 垂直切分

  统一多个服务（一个表包含订单和用户数据）到多处服务，每处服务性能提高。专门对读优化。

- 水平切分（分片）
  
  插入、查询、整体服务s
  选择分片：哈希、范围、
  `问题`
  ID 唯一、事务、连接
  
- Explain 分析

  类型、行数

`参考`

- 生成ID：集中，分布式（域）

- snowflake：唯一标识+时间戳+自增

# 引擎

外键、事务、锁、备份、崩溃、MyISAM 特性

# 问题

- 不使用索引？

  字符串

  如 !=、<>、not，表达式一部分

  最左前缀，like 通配符

  使用 or 连接条件

  函数参数

- 整形、字符串，哪种索引快？

  呈现转存储